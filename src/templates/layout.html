<!DOCTYPE html>
<html lang="en" data-theme="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{.Title}} â€” AI Context Firewall</title>
    <style>
        :root[data-theme="dark"] {
            --bg: #0d1117;
            --bg-secondary: #161b22;
            --border: #30363d;
            --text: #c9d1d9;
            --text-heading: #e6edf3;
            --text-muted: #8b949e;
            --text-faint: #484f58;
            --accent: #58a6ff;
            --input-bg: #0d1117;
            --hover-bg: #161b22;
            --badge-safe-bg: #1b4332; --badge-safe-fg: #52c41a;
            --badge-suspicious-bg: #3b3000; --badge-suspicious-fg: #faad14;
            --badge-malicious-bg: #3b1010; --badge-malicious-fg: #ff4d4f;
            --badge-unknown-bg: #21262d; --badge-unknown-fg: #8b949e;
            --badge-forwarded-bg: #0d2137; --badge-forwarded-fg: #58a6ff;
            --badge-blocked-bg: #3b1010; --badge-blocked-fg: #ff4d4f;
            --btn-green: #238636; --btn-green-hover: #2ea043;
            --btn-red: #da3633; --btn-red-hover: #f85149;
        }
        :root[data-theme="light"] {
            --bg: #ffffff;
            --bg-secondary: #f6f8fa;
            --border: #d0d7de;
            --text: #1f2328;
            --text-heading: #1f2328;
            --text-muted: #656d76;
            --text-faint: #8b949e;
            --accent: #0969da;
            --input-bg: #ffffff;
            --hover-bg: #f6f8fa;
            --badge-safe-bg: #dafbe1; --badge-safe-fg: #1a7f37;
            --badge-suspicious-bg: #fff8c5; --badge-suspicious-fg: #9a6700;
            --badge-malicious-bg: #ffebe9; --badge-malicious-fg: #cf222e;
            --badge-unknown-bg: #f6f8fa; --badge-unknown-fg: #656d76;
            --badge-forwarded-bg: #ddf4ff; --badge-forwarded-fg: #0969da;
            --badge-blocked-bg: #ffebe9; --badge-blocked-fg: #cf222e;
            --btn-green: #1a7f37; --btn-green-hover: #2da44e;
            --btn-red: #cf222e; --btn-red-hover: #a40e26;
        }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, monospace;
            background: var(--bg);
            color: var(--text);
            line-height: 1.5;
        }
        nav {
            background: var(--bg-secondary);
            border-bottom: 1px solid var(--border);
            padding: 0.75rem 1.5rem;
            display: flex;
            align-items: center;
            gap: 2rem;
        }
        nav .brand {
            font-weight: 700;
            font-size: 1.1rem;
            color: var(--accent);
            text-decoration: none;
        }
        nav a {
            color: var(--text-muted);
            text-decoration: none;
            font-size: 0.9rem;
        }
        nav a:hover, nav a.active {
            color: var(--text);
        }
        .theme-toggle {
            margin-left: auto;
            background: transparent;
            border: 1px solid var(--border);
            color: var(--text-muted);
            padding: 0.25rem 0.5rem;
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.85rem;
            margin-top: 0;
        }
        .theme-toggle:hover { color: var(--text); background: transparent; }
        .container {
            max-width: 1200px;
            margin: 1.5rem auto;
            padding: 0 1.5rem;
        }
        h1 {
            font-size: 1.4rem;
            margin-bottom: 1rem;
            color: var(--text-heading);
        }
        table {
            width: 100%;
            border-collapse: collapse;
            font-size: 0.85rem;
        }
        th, td {
            padding: 0.5rem 0.75rem;
            text-align: left;
            border-bottom: 1px solid var(--border);
        }
        th {
            background: var(--bg-secondary);
            color: var(--text-muted);
            font-weight: 600;
            text-transform: uppercase;
            font-size: 0.75rem;
            letter-spacing: 0.05em;
        }
        tr:hover { background: var(--hover-bg); }
        .badge {
            display: inline-block;
            padding: 0.15rem 0.5rem;
            border-radius: 3px;
            font-size: 0.75rem;
            font-weight: 600;
        }
        .badge-safe { background: var(--badge-safe-bg); color: var(--badge-safe-fg); }
        .badge-suspicious { background: var(--badge-suspicious-bg); color: var(--badge-suspicious-fg); }
        .badge-malicious { background: var(--badge-malicious-bg); color: var(--badge-malicious-fg); }
        .badge-unknown { background: var(--badge-unknown-bg); color: var(--badge-unknown-fg); }
        .badge-forwarded { background: var(--badge-forwarded-bg); color: var(--badge-forwarded-fg); }
        .badge-blocked { background: var(--badge-blocked-bg); color: var(--badge-blocked-fg); }
        .score { font-variant-numeric: tabular-nums; }
        .content-snippet {
            max-width: 300px;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
            font-family: monospace;
            font-size: 0.8rem;
            color: var(--text-muted);
        }
        label {
            display: block;
            font-size: 0.85rem;
            color: var(--text-muted);
            margin-bottom: 0.25rem;
            margin-top: 1rem;
        }
        input[type="text"], input[type="number"], textarea, select {
            width: 100%;
            padding: 0.5rem 0.75rem;
            background: var(--input-bg);
            border: 1px solid var(--border);
            border-radius: 6px;
            color: var(--text);
            font-family: monospace;
            font-size: 0.85rem;
        }
        input[type="range"] {
            width: 100%;
            margin-top: 0.25rem;
        }
        textarea { min-height: 200px; resize: vertical; }
        button {
            margin-top: 1.5rem;
            padding: 0.6rem 1.5rem;
            background: var(--btn-green);
            color: #fff;
            border: none;
            border-radius: 6px;
            font-size: 0.9rem;
            cursor: pointer;
            font-weight: 600;
        }
        button:hover { background: var(--btn-green-hover); }
        .radio-group { display: flex; gap: 1rem; margin-top: 0.5rem; flex-wrap: wrap; }
        .radio-group label {
            display: flex;
            align-items: center;
            gap: 0.4rem;
            color: var(--text);
            margin: 0;
            cursor: pointer;
        }
        .status-bar {
            display: flex;
            gap: 1.5rem;
            margin-bottom: 1rem;
            font-size: 0.85rem;
            color: var(--text-muted);
        }
        .status-bar span { color: var(--accent); font-weight: 600; }
        .empty { text-align: center; padding: 3rem; color: var(--text-faint); }
        .form-row { display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; }
        @media (max-width: 768px) { .form-row { grid-template-columns: 1fr; } }
    </style>
</head>
<body>
    <nav>
        <a href="/" class="brand">AI Context Firewall</a>
        <a href="/" {{if eq .Nav "dashboard"}}class="active"{{end}}>Dashboard</a>
        <a href="/config" {{if eq .Nav "config"}}class="active"{{end}}>Config</a>
        <button class="theme-toggle" onclick="toggleTheme()" title="Toggle theme">
            <span id="theme-icon">&#9788;</span>
        </button>
    </nav>
    <div class="container">
        {{template "content" .}}
    </div>
    <script>
    function getTheme() {
        return localStorage.getItem('theme') || 'dark';
    }
    function applyTheme(t) {
        document.documentElement.setAttribute('data-theme', t);
        document.getElementById('theme-icon').innerHTML = t === 'dark' ? '&#9788;' : '&#9790;';
    }
    function toggleTheme() {
        var t = getTheme() === 'dark' ? 'light' : 'dark';
        localStorage.setItem('theme', t);
        applyTheme(t);
    }
    applyTheme(getTheme());
    </script>
</body>
</html>
